# Open Canvas Dockerfile
FROM node:20-alpine

WORKDIR /app

# Copy package files
COPY vendor/open-canvas/package.json vendor/open-canvas/yarn.lock ./
COPY vendor/open-canvas/turbo.json ./

# Copy workspaces
COPY vendor/open-canvas/apps ./apps
COPY vendor/open-canvas/packages ./packages

# Install dependencies
RUN yarn install --frozen-lockfile

# Build
RUN yarn build

# Expose port (Open Canvas web)
EXPOSE 3000

# Start the web app
CMD ["yarn", "start"]

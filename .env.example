# =============================================================================
# AI NUCLEUS PLATFORM - Environment Configuration
# =============================================================================
# Copy this file to .env and update values before deployment
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# CORE APPLICATION SETTINGS
# -----------------------------------------------------------------------------
APP_NAME="AI Nucleus Platform"
ENVIRONMENT=development
DEBUG=false
HOST=0.0.0.0
PORT=8000

# CORS (comma-separated list)
CORS_ORIGINS=http://localhost,http://127.0.0.1

# Rust workflow engine
RUST_BACKEND_URL=http://127.0.0.1:11435

# -----------------------------------------------------------------------------
# SECURITY & AUTHENTICATION
# -----------------------------------------------------------------------------
ENABLE_AUTH=true
API_KEY=change_me_api_key_123
RATE_LIMIT_PER_MINUTE=100

# Backend secret key
BACKEND_SECRET_KEY=change_me_backend_secret_key_32chars
N8N_ENCRYPTION_KEY=change_me_super_secret_n8n_key
N8N_WEBHOOK_URL=http://localhost/n8n/
N8N_TIMEZONE=UTC

# -----------------------------------------------------------------------------
# KEYCLOAK - Identity & Access Management
# -----------------------------------------------------------------------------
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=change_me_admin_password_123

# Keycloak realm settings
KEYCLOAK_REALM=nucleus
KEYCLOAK_BASE_URL=http://keycloak:8080
KEYCLOAK_URL=http://keycloak:8080

# Nucleus realm users (set on first startup)
NUCLEUS_ADMIN_PASSWORD=change_me_user_password_123

# Client credentials
KEYCLOAK_APISIX_CLIENT_ID=nucleus-gateway
KEYCLOAK_APISIX_CLIENT_SECRET=change_me_gateway_client_secret
NUCLEUS_CLIENT_SECRET=change_me_gateway_client_secret
NUCLEUS_SERVICE_SECRET=change_me_service_secret_xyz789

# -----------------------------------------------------------------------------
# APISIX - API Gateway OIDC Configuration
# -----------------------------------------------------------------------------
APISIX_ADMIN_KEY=ai_nucleus_admin_key_change_me
APISIX_URL=http://gateway:9080

# OIDC settings for route protection
OIDC_CLIENT_ID=nucleus-gateway
OIDC_CLIENT_SECRET=change_me_gateway_client_secret
APISIX_OIDC_SESSION_SECRET=change_me_32_char_session_secret_
SESSION_SECRET=change_me_32_char_session_secret_

# -----------------------------------------------------------------------------
# SERVICE INTERNAL URLs
# -----------------------------------------------------------------------------
N8N_URL=http://n8n:5678
QDRANT_URL=http://qdrant:6333
MEMGRAPH_URI=bolt://memgraph:7687
SHIMMY_URL=http://shimmy:3001
LANGFLOW_URL=http://langflow:7860
GITEA_URL=http://gitea:3000
HYPERBOOKLM_URL=http://hyperbooklm:3002
OPENCANVAS_URL=http://opencanvas:3000
DRAGONFLY_URL=redis://dragonfly:6379
MARQUEZ_URL=http://marquez:5000
NUCLEUS_GRAPH_URL=http://nucleus-graph:5000

# -----------------------------------------------------------------------------
# DATABASE PASSWORDS
# -----------------------------------------------------------------------------
KEYCLOAK_DB_PASSWORD=change_me_keycloak_db_password
GITEA_DB_PASSWORD=change_me_gitea_db_password
MARQUEZ_DB_PASSWORD=change_me_marquez_db_password
N8N_DB_PASSWORD=change_me_n8n_db_password
POSTGRES_PASSWORD=change_me_postgres_password
SERVICE_REGISTRY_DB_PASSWORD=change_me_registry_db_password

# -----------------------------------------------------------------------------
# OPTIONAL SERVICE CONFIGURATION
# -----------------------------------------------------------------------------
# Dragonfly (Redis-compatible) - leave empty for no password
DRAGONFLY_PASSWORD=

# Gitea
GITEA_SECRET_KEY=change_me_gitea_secret

# n8n workflow automation (internal service, routed via gateway /n8n)
DB_TYPE=postgresdb
N8N_PROTOCOL=http
N8N_HOST=localhost
N8N_PORT=80
N8N_PATH=/n8n/
N8N_EDITOR_BASE_URL=http://localhost/n8n/
N8N_LOG_LEVEL=info
N8N_TEMPLATES_ENABLED=false
N8N_PERSONALIZATION_ENABLED=false
N8N_DIAGNOSTICS_ENABLED=false
N8N_VERSION_NOTIFICATIONS_ENABLED=false
N8N_VERSION_NOTIFICATIONS_WHATS_NEW_ENABLED=false
N8N_BOOTSTRAP_WORKFLOWS=true
LEAN4_PARSER_URL=http://lean4-runtime:8002
SERVICE_N8N_URL=http://service-n8n:8003
SERVICE_GITEA_URL=http://service-gitea:8004

# Service registry
SERVICE_REGISTRY_BIND=0.0.0.0:8100
SERVICE_REGISTRY_URL=http://service-registry:8100
SERVICE_REGISTRY_CONFIG=config/service_registry.json
SERVICE_REGISTRY_DB_URL=postgres://registry:registry@registry-db:5432/service_registry
SERVICE_REGISTRY_EMBEDDING_DIM=384

# -----------------------------------------------------------------------------
# NETWORK CONFIGURATION
# -----------------------------------------------------------------------------
# Set to 'true' for complete network isolation (containers cannot reach internet)
NETWORK_INTERNAL=false

# External hostname (for production with real domain)
EXTERNAL_HOSTNAME=localhost

# SSL/TLS (for production)
SSL_ENABLED=false
SSL_CERT_PATH=./certs/fullchain.pem
SSL_KEY_PATH=./certs/privkey.pem

# -----------------------------------------------------------------------------
# LOGGING & MONITORING
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_METRICS=true
ENABLE_TRACING=false

# -----------------------------------------------------------------------------
# RESOURCE LIMITS (in MB)
# -----------------------------------------------------------------------------
BACKEND_MEMORY_LIMIT=512
LANGFLOW_MEMORY_LIMIT=2048
QDRANT_MEMORY_LIMIT=1024
MEMGRAPH_MEMORY_LIMIT=2048
KEYCLOAK_MEMORY_LIMIT=512

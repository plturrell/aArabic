<mvc:View
    controllerName="hypershimmy.controller.Detail"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core">
    
    <Page
        id="detail"
        title="{Title}"
        showNavButton="true"
        navButtonPress=".onNavBack">
        
        <headerContent>
            <Button
                icon="sap-icon://discussion"
                text="{i18n>detailChatButton}"
                press=".onOpenChat"
                type="Emphasized"/>
            <Button
                icon="sap-icon://action"
                tooltip="{i18n>detailActionsButton}"
                press=".onShowActions"/>
        </headerContent>
        
        <content>
            <!-- Empty state when no source selected -->
            <VBox 
                visible="{= !${Id} }"
                class="sapUiSmallMargin hypershimmyDetail"
                alignItems="Center"
                justifyContent="Center">
                <core:Icon
                    src="sap-icon://documents"
                    size="4rem"
                    color="#0854a0"
                    class="sapUiLargeMarginBottom"/>
                <Title
                    text="{i18n>detailNoSourceSelected}"
                    class="sapUiSmallMarginBottom"/>
                <Text
                    text="{i18n>detailNoSourceSelectedText}"/>
            </VBox>
            
            <!-- Source details when selected -->
            <VBox 
                visible="{= !!${Id} }"
                class="sapUiSmallMargin hypershimmyDetail">
                
                <!-- Source info card -->
                <f:Card class="sapUiSmallMarginBottom">
                    <f:header>
                        <core:Title text="{i18n>detailSourceInfoTitle}"/>
                    </f:header>
                    <f:content>
                        <VBox class="sapUiSmallMargin">
                            <Label text="{i18n>detailSourceType}" design="Bold"/>
                            <Text text="{SourceType}" class="sapUiTinyMarginBottom"/>
                            
                            <Label text="{i18n>detailSourceUrl}" design="Bold"/>
                            <Link text="{Url}" href="{Url}" target="_blank" class="sapUiTinyMarginBottom"/>
                            
                            <Label text="{i18n>detailSourceStatus}" design="Bold"/>
                            <ObjectStatus text="{Status}" state="{
                                path: 'Status',
                                formatter: '.formatter.statusState'
                            }" class="sapUiTinyMarginBottom"/>
                            
                            <Label text="{i18n>detailSourceAdded}" design="Bold"/>
                            <Text text="{
                                path: 'CreatedAt',
                                formatter: '.formatter.formatDateTime'
                            }"/>
                        </VBox>
                    </f:content>
                </f:Card>
                
                <!-- Content preview -->
                <f:Card class="sapUiSmallMarginBottom">
                    <f:header>
                        <core:Title text="{i18n>detailContentPreviewTitle}"/>
                    </f:header>
                    <f:content>
                        <VBox class="sapUiSmallMargin">
                            <Text 
                                text="{Content}"
                                maxLines="10"
                                class="detailContentPreview"/>
                            <Link 
                                text="{i18n>detailShowFullContent}"
                                press=".onShowFullContent"
                                class="sapUiSmallMarginTop"/>
                        </VBox>
                    </f:content>
                </f:Card>
                
                <!-- Actions panel -->
                <f:Card>
                    <f:header>
                        <core:Title text="{i18n>detailActionsTitle}"/>
                    </f:header>
                    <f:content>
                        <VBox class="sapUiSmallMargin">
                            <Button
                                text="{i18n>detailChatWithSource}"
                                icon="sap-icon://discussion"
                                type="Emphasized"
                                press=".onOpenChat"
                                width="100%"
                                class="sapUiTinyMarginBottom"/>
                            <Button
                                text="{i18n>detailGenerateSummary}"
                                icon="sap-icon://document-text"
                                press=".onGenerateSummary"
                                width="100%"
                                class="sapUiTinyMarginBottom"/>
                            <Button
                                text="{i18n>detailGenerateMindmap}"
                                icon="sap-icon://org-chart"
                                press=".onGenerateMindmap"
                                width="100%"
                                class="sapUiTinyMarginBottom"/>
                            <Button
                                text="{i18n>detailGenerateAudio}"
                                icon="sap-icon://sound"
                                press=".onGenerateAudio"
                                width="100%"
                                class="sapUiTinyMarginBottom"/>
                            <Button
                                text="{i18n>detailDeleteSource}"
                                icon="sap-icon://delete"
                                type="Reject"
                                press=".onDeleteSource"
                                width="100%"/>
                        </VBox>
                    </f:content>
                </f:Card>
            </VBox>
        </content>
    </Page>
    
</mvc:View>

<mvc:View
    controllerName="nExtract.webapp.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:l="sap.ui.layout"
    xmlns:t="sap.ui.table"
    xmlns:u="sap.ui.unified">
    <f:DynamicPage showFooter="true">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title text="{doc>/name}"/>
                </f:heading>
                <f:expandedContent>
                    <Label text="{doc>/id}"/>
                </f:expandedContent>
                <f:actions>
                    <Button text="Export JSON" type="Emphasized" icon="sap-icon://download"/>
                    <Button icon="sap-icon://full-screen" press=".onFullScreen"/>
                    <Button icon="sap-icon://decline" press=".onCloseDetail"/>
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <HBox gap="2rem">
                    <ObjectStatus title="Status" text="{doc>/status}" state="Success"/>
                    <ObjectStatus title="Processed" text="Today, 10:23 AM"/>
                    <ObjectStatus title="Fields" text="14 found"/>
                </HBox>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
             <l:Splitter height="100%" width="100%">
                <l:SplitPane requiredParentWidth="400">
                    <l:layoutData><l:SplitterLayoutData size="40%" /></l:layoutData>
                    <VBox class="sapUiSmallMargin" height="100%" justifyContent="Center" alignItems="Center" backgroundDesign="Solid">
                        <u:FileUploader
                            width="100%"
                            placeholder="Upload new version..."
                            class="sapUiSmallMarginBottom"/>
                         <!-- Placeholder for Document Preview -->
                        <VBox 
                            width="200px" 
                            height="280px" 
                            alignItems="Center" 
                            justifyContent="Center" 
                            class="hypershimmySourceCard"
                            backgroundDesign="Translucent">
                            <Icon src="sap-icon://document-text" size="4rem" color="#888"/>
                            <Text text="Document Preview" class="sapUiSmallMarginTop"/>
                        </VBox>
                    </VBox>
                </l:SplitPane>
                
                <l:SplitPane requiredParentWidth="500">
                     <l:layoutData><l:SplitterLayoutData size="60%" /></l:layoutData>
                     <t:Table
                        rows="{results>/data}"
                        visibleRowCountMode="Auto"
                        selectionMode="None">
                        <t:columns>
                            <t:Column>
                                <Label text="Field" />
                                <t:template><Text text="{results>key}" wrapping="false" class="sapMTextBold"/></t:template>
                            </t:Column>
                             <t:Column>
                                <Label text="Extracted Value" />
                                <t:template><Input value="{results>value}" editable="true"/></t:template>
                            </t:Column>
                             <t:Column width="100px">
                                <Label text="Confidence" />
                                <t:template><ObjectStatus text="{results>confidence}%" state="{= ${results>confidence} > 90 ? 'Success' : 'Warning'}"/></t:template>
                            </t:Column>
                        </t:columns>
                    </t:Table>
                </l:SplitPane>
            </l:Splitter>
        </f:content>
    </f:DynamicPage>
</mvc:View>
